{
  "info": {
    "name": "Not Uygulaması Backend API",
    "description": "Authentication & AI API endpoints for Note App Backend",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:3000",
      "type": "string"
    },
    {
      "key": "token",
      "value": "",
      "type": "string"
    },
    {
      "key": "noteId",
      "value": "",
      "type": "string"
    }
  ],
  "item": [
    {
      "name": "Health Check",
      "request": {
        "method": "GET",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/",
          "host": ["{{baseUrl}}"],
          "path": [""]
        }
      },
      "response": []
    },
    {
      "name": "Auth",
      "item": [
        {
          "name": "Register",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Ahmet\",\n  \"lastName\": \"Yılmaz\",\n  \"email\": \"ahmet@example.com\",\n  \"password\": \"password123\",\n  \"confirmPassword\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 200) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data.token) {",
                  "        pm.collectionVariables.set('token', response.data.token);",
                  "        console.log('Token saved:', response.data.token);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"ahmet@example.com\",\n  \"password\": \"password123\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            }
          },
          "response": []
        },
        {
          "name": "Get Profile",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "profile"]
            }
          },
          "response": []
        },
        {
          "name": "Update Profile",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              },
              {
                "key": "Authorization",
                "value": "Bearer {{token}}"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"Ahmet Güncellenmiş\",\n  \"lastName\": \"Yılmaz Güncellenmiş\",\n  \"email\": \"ahmet.guncellenmis@example.com\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "profile"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "AI",
      "item": [
        {
          "name": "Summarize Text",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Bu hafta toplantıda ele alınan konular: 1) Proje timeline'ının güncellenmesi - backend geliştirme 2 hafta gecikecek. 2) Yeni UI tasarımları onaylandı, frontend ekibi pazartesi başlayacak. 3) Test süreçleri için QA ekibi ile koordinasyon kurulacak. 4) Veritabanı optimizasyonu için DBA ile görüşme planlandı. 5) Güvenlik testleri için external firma ile anlaşma yapılacak. Bir sonraki toplantı gelecek salı saat 14:00'da.\",\n  \"summaryLength\": \"orta\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/summarize-text",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "summarize-text"]
            }
          },
          "response": []
        },
        {
          "name": "Summarize Text - Short",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Node.js, Google'ın V8 JavaScript motorunu kullanarak JavaScript kodunu sunucu tarafında çalıştırmaya olanak sağlayan bir çalışma zamanı ortamıdır. Ryan Dahl tarafından 2009 yılında geliştirilmiştir. Node.js'in en önemli özelliği, asenkron ve olay odaklı mimarisidir. Bu sayede binlerce eşzamanlı bağlantıyı tek bir iş parçacığında işleyebilir. NPM (Node Package Manager) ile geniş bir paket ekosistemi sunar. Web sunucuları, API'ler, gerçek zamanlı uygulamalar ve mikroservisler geliştirmek için yaygın olarak kullanılır.\",\n  \"summaryLength\": \"kısa\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/summarize-text",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "summarize-text"]
            }
          },
          "response": []
        },
        {
          "name": "Summarize Text - Long",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Express.js, Node.js için minimal ve esnek bir web uygulama çerçevesidir. TJ Holowaychuk tarafından geliştirilmiş ve şu anda OpenJS Foundation tarafından sürdürülmektedir. Express, web ve mobil uygulamalar için güçlü özellikler seti sağlar. Middleware sistemi sayesinde HTTP isteklerini işlemek için modüler bir yaklaşım sunar. Routing, template engine desteği, statik dosya sunumu, error handling gibi temel web geliştirme ihtiyaçlarını karşılar. RESTful API'ler geliştirmek için ideal bir platformdur. Minimal yapısı sayesinde geliştiricilere büyük esneklik sağlar ve ihtiyaçlarına göre özelleştirme imkanı verir. Connect middleware'leri ile uyumludur ve geniş bir ekosisteme sahiptir.\",\n  \"summaryLength\": \"uzun\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/summarize-text",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "summarize-text"]
            }
          },
          "response": []
        },
        {
          "name": "Analyze Image",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "image",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "userText",
                  "value": "Bu görseldeki metni oku ve önemli noktaları çıkar",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/analyze-image",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "analyze-image"]
            }
          },
          "response": []
        },
        {
          "name": "Analyze Image - Diagram Analysis",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "image",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "userText",
                  "value": "Bu diyagramı açıkla ve ana bileşenlerini listele",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/analyze-image",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "analyze-image"]
            }
          },
          "response": []
        },
        {
          "name": "Analyze Image - Text Extraction",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "image",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "userText",
                  "value": "Bu görseldeki tüm metinleri oku ve düzenli bir şekilde listele",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/analyze-image",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "analyze-image"]
            }
          },
          "response": []
        },
        {
          "name": "Upload Image",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "image",
                  "type": "file",
                  "src": []
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/upload-image",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "upload-image"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Notes",
      "item": [
        {
          "name": "Get All Notes",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notes?page=1&limit=10",
              "host": ["{{baseUrl}}"],
              "path": ["api", "notes"],
              "query": [
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "10"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Notes with Search",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notes?search=toplantı&page=1&limit=5",
              "host": ["{{baseUrl}}"],
              "path": ["api", "notes"],
              "query": [
                {
                  "key": "search",
                  "value": "toplantı"
                },
                {
                  "key": "page",
                  "value": "1"
                },
                {
                  "key": "limit",
                  "value": "5"
                }
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Note by ID",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notes/{{noteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "notes", "{{noteId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Create Note",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "if (pm.response.code === 201) {",
                  "    const response = pm.response.json();",
                  "    if (response.data && response.data._id) {",
                  "        pm.collectionVariables.set('noteId', response.data._id);",
                  "        console.log('Note ID saved:', response.data._id);",
                  "    }",
                  "}"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Toplantı Notları\",\n  \"content\": \"Bugünkü toplantıda şu konular ele alındı:\\n1. Proje timeline güncellendi\\n2. Yeni özellikler belirlendi\\n3. Test süreçleri planlandı\",\n  \"images\": []\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/notes",
              "host": ["{{baseUrl}}"],
              "path": ["api", "notes"]
            }
          },
          "response": []
        },
        {
          "name": "Update Note",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"title\": \"Güncellenmiş Toplantı Notları\",\n  \"content\": \"Toplantı notları güncellendi. Yeni kararlar eklendi.\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/notes/{{noteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "notes", "{{noteId}}"]
            }
          },
          "response": []
        },
        {
          "name": "Delete Note",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/notes/{{noteId}}",
              "host": ["{{baseUrl}}"],
              "path": ["api", "notes", "{{noteId}}"]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Test Scenarios",
      "item": [
        {
          "name": "Register - Validation Error",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"firstName\": \"A\",\n  \"lastName\": \"B\",\n  \"email\": \"invalid-email\",\n  \"password\": \"123\",\n  \"confirmPassword\": \"456\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/register",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "register"]
            }
          },
          "response": []
        },
        {
          "name": "Login - Wrong Credentials",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"wrong@example.com\",\n  \"password\": \"wrongpassword\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/auth/login",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "login"]
            }
          },
          "response": []
        },
        {
          "name": "Get Profile - No Token",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "profile"]
            }
          },
          "response": []
        },
        {
          "name": "Get Profile - Invalid Token",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer invalid-token-here"
              }
            ],
            "url": {
              "raw": "{{baseUrl}}/api/auth/profile",
              "host": ["{{baseUrl}}"],
              "path": ["api", "auth", "profile"]
            }
          },
          "response": []
        },
        {
          "name": "AI - Summarize Text - Validation Error (Empty Text)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"\",\n  \"summaryLength\": \"orta\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/summarize-text",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "summarize-text"]
            }
          },
          "response": []
        },
        {
          "name": "AI - Summarize Text - Validation Error (Text Too Short)",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Kısa metin\",\n  \"summaryLength\": \"orta\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/summarize-text",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "summarize-text"]
            }
          },
          "response": []
        },
        {
          "name": "AI - Summarize Text - Invalid Summary Length",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"text\": \"Bu yeterince uzun bir metin örneğidir. Özetleme işlemi için minimum karakter sayısını karşılamaktadır. Test amaçlı olarak yazılmıştır.\",\n  \"summaryLength\": \"geçersiz\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/summarize-text",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "summarize-text"]
            }
          },
          "response": []
        },
        {
          "name": "AI - Analyze Image - No File",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "userText",
                  "value": "Bu görseli analiz et",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/analyze-image",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "analyze-image"]
            }
          },
          "response": []
        },
        {
          "name": "AI - Analyze Image - Empty User Text",
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "image",
                  "type": "file",
                  "src": []
                },
                {
                  "key": "userText",
                  "value": "",
                  "type": "text"
                }
              ]
            },
            "url": {
              "raw": "{{baseUrl}}/api/ai/analyze-image",
              "host": ["{{baseUrl}}"],
              "path": ["api", "ai", "analyze-image"]
            }
          },
          "response": []
        }
      ]
    }
  ]
}
